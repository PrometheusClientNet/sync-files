name: File Sync

on:
  schedule: [{ cron: "15 */24 * * *" }]
  push:
    branches:
      - master

jobs:
  file-sync:
    runs-on: ubuntu-20.04
    steps:
      - name: Fetching Local Repository
        uses: actions/checkout@v2
      - name: File Sync
        uses: kbrashears5/github-action-file-sync@master
        with:
          PULL_REQUEST_BRANCH_NAME: "master"
          REPOSITORIES: |
            PrometheusClientNet/Prometheus.Client@sync-files
            PrometheusClientNet/Prometheus.Client.DependencyInjection@sync-files
            PrometheusClientNet/Prometheus.Client.HealthChecks@sync-files
            PrometheusClientNet/Prometheus.Client.HttpRequestDurations@sync-files
            PrometheusClientNet/Prometheus.Client.AspNetCore@sync-files
            PrometheusClientNet/prom-tmpl@sync-files
            PrometheusClientNet/Prometheus.Client.MetricPusher@sync-files
            PrometheusClientNet/Prometheus.Client.MetricServer@sync-files
          FILES: |
            root/LICENSE=LICENSE
            root/icon.png=icon.png
            root/Directory.Build.props=Directory.Build.props
            root/stylecop.json=stylecop.json
            root/.ruleset=.ruleset
            root/.editorconfig=.editorconfig
            root/.gitattributes=.gitattributes
            github/renovate.json=.github/renovate.json
          TOKEN: ${{ secrets.SYNC_FILES }}
